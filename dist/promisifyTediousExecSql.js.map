{"version":3,"sources":["../src/promisifyTediousExecSql.js"],"names":["sql","require","mapReduceSqlRows","addSqlParamsToRequest","promisifyTediousExecSql","connection","query","params","resolve","reject","sqlCallback","err","rowCount","rows","results","request","Request","execSql","module","exports"],"mappings":";;;;;;;;AAAA,IAAMA,MAAMC,QAAQ,SAAR,CAAZ;AACA,IAAMC,mBAAmBD,6BAAzB;AACA,IAAME,wBAAwBF,kCAA9B;;AAEA,IAAMG,0BAA0B,SAA1BA,uBAA0B,CAACC,UAAD,EAAaC,KAAb;AAAA,MAAoBC,MAApB,uEAA6B,IAA7B;AAAA,SAC9B,sBAAa,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAChC,QAAMC,cAAc,SAAdA,WAAc,CAACC,GAAD,EAAMC,QAAN,EAAgBC,IAAhB,EAAyB;AAC3C,UAAIF,GAAJ,EAAS;AACPF,eAAOE,GAAP;AACD,OAFD,MAEO;AACL,YAAMG,UAAUZ,iBAAiBW,IAAjB,CAAhB;AACAL,gBAAQM,OAAR;AACD;AACF,KAPD;AAQA,QAAMC,UAAU,IAAIf,IAAIgB,OAAR,CACdV,KADc,EAEdI,WAFc,CAAhB;AAIA,QAAIH,MAAJ,EAAY;AACVJ,4BAAsBI,MAAtB,EAA8BQ,OAA9B;AACD;AACDV,eAAWY,OAAX,CAAmBF,OAAnB;AACD,GAjBD,CAD8B;AAAA,CAAhC;AAmBAG,OAAOC,OAAP,GAAiBf,uBAAjB","file":"promisifyTediousExecSql.js","sourcesContent":["const sql = require('tedious');\nconst mapReduceSqlRows = require('./mapReduceSqlRows');\nconst addSqlParamsToRequest = require('./addSqlParamsToRequest');\n\nconst promisifyTediousExecSql = (connection, query, params = null) =>\n  new Promise(((resolve, reject) => {\n    const sqlCallback = (err, rowCount, rows) => {\n      if (err) {\n        reject(err);\n      } else {\n        const results = mapReduceSqlRows(rows);\n        resolve(results);\n      }\n    };\n    const request = new sql.Request(\n      query,\n      sqlCallback,\n    );\n    if (params) {\n      addSqlParamsToRequest(params, request);\n    }\n    connection.execSql(request);\n  }));\nmodule.exports = promisifyTediousExecSql;\n"]}